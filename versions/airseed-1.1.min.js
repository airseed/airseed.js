window.airseed=function(){var e="Airseed: Missing client ID. Please call airseed.init('...') with valid client ID first.";var t="Airseed: Missing CSS selector to bind click event.";var n="Airseed: Invalid selector. Unable to locate specified elements on page.";var r="Airseed: Missing access token required for user API requests.";var s="Airseed: Missing endpoint required for user API requests.";var o="Airseed: Received invalid user access token.";var u="Airseed: Failed to fetch /v1/users/me.json endpoint info.";var a="Airseed: Failed to fetch a proper API endpoint response.";var f=["selector","provider","flow","callbackUrl"];var l="popup_window";var c="page_redirect";var h="https://auth.airseed.com";var p="https://api.airseed.com";var d=500;var v=500;var m={};var g;var y=function(e){var t;if(typeof e==="string"){t=document.querySelectorAll(e)}else if(e.length){t=e}else{t=[e]}return t};var b=function(){return g._authBaseUrl||h};var w=function(){return g._apiBaseUrl||p};var E=function(e,t){var n=b()+"/oauth/authenticate?client_id="+e;if(t.provider)n+="&provider="+t.provider;for(var r in t){if(f.indexOf(r)<0){var i=r.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()});var s=t[r];n+="&"+i+"="+s}}return encodeURI(n)};var S=function(e,t,n){var r=Math.random().toString(36).substring(7);var i=screen.availWidth/2-d/2;var s=screen.availHeight/2-v/2;var o=window.open(e+"&clientside=js",r,"toolbar=yes, scrollbars=yes, resizable=yes, width="+d+", height="+v+", top="+s+", left="+i);m[r]={callbackUrl:t,popupWindow:o,provider:n}};var x=function(e,t){window.location.href=e+="&redirect_uri="+t};var T=function(e,t){for(i=0;i<e.length;i++){e[i].addEventListener("click",function(){var e=E(g._appClientId,t);if(t.flow==l){S(e,t.callbackUrl,t.provider)}else{x(e,t.callbackUrl)}})}};var N=function(e){try{return JSON.parse(e)}catch(t){g._failureCallback({message:o});throw o}};var C=function(e){try{return JSON.parse(e)}catch(t){g._failureCallback({message:u});throw u}};var k=function(e){try{return JSON.parse(e)}catch(t){throw a}};var L=function(e){var t=new XMLHttpRequest;t.onload=function(){var r=C(t.responseText);if(r){g._successCallback(r,e)}else{g._failureCallback({message:u})}};t.open("get",w()+"/v1/users/me.json",true);t.setRequestHeader("Authorization","Bearer "+e.access_token);t.send()};var A=function(e,t,n,r){paramString=D(r);var i=new XMLHttpRequest;i.onload=function(){var t=k(i.responseText);if(t){n(t)}else{throw a}};i.open("get",w()+"/v1/users/me/"+t+".json"+"?"+paramString,true);i.setRequestHeader("Authorization","Bearer "+e);i.send()};var O=function(e,t){var n=[];for(var r in e){if(e.hasOwnProperty(r)){n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}}var i=t+"?"+n.join("&");window.location.href=i};var M=function(e){if(e.origin!==b())return;if(!e.data.access_token)return;var t=m[e.data.popupName].callbackUrl;var n=new XMLHttpRequest;n.onload=function(){var i=N(n.responseText);if(!i)return;if(!t){L(e.data)}else{O(e.data,t)}};n.open("get",b()+"/oauth/tokeninfo?access_token="+e.data.access_token,true);n.send()};var _=function(){window.addEventListener("message",M,false)};var D=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}return t.join("&")};g={init:function(e){this._appClientId=e;this._failureCallback=function(){};this._successCallback=function(){};_()},bind:function(r){if(!this._appClientId)throw e;if(!r.selector)throw t;var i=y(r.selector);if(!i)throw n;T(i,r)},success:function(e){this._successCallback=e},failure:function(e){this._failureCallback=e},userAPI:function(e,t,n,i){if(!e)throw r;if(!t)throw ERR_MISSING_ENDPOINT;i=typeof i!=="undefined"?i:{};A(e,t,n,i)},config:function(e){this._authBaseUrl=e.authBaseUrl;this._apiBaseUrl=e.apiBaseUrl}};return g}()