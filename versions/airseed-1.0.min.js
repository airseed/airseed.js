window.airseed=function(){var e="Airseed: Missing client ID. Please call airseed.init('...') with valid client ID first.";var t="Airseed: Missing CSS selector to bind click event.";var n="Airseed: Invalid selector. Unable to locate specified elements on page.";var r="Airseed: Received invalid user access token.";var s="Airseed: Failed to fetch /v1/users/me.json endpoint info.";var o=["selector","provider","flow","callbackUrl"];var u="popup_window";var a="page_redirect";var f="https://auth.airseed.com";var l="https://api.airseed.com";var c=500;var h=500;var p={};var d;var v=function(e){var t;if(typeof e==="string"){t=document.querySelectorAll(e)}else if(e.length){t=e}else{t=[e]}return t};var m=function(){return d._authBaseUrl||f};var g=function(){return d._apiBaseUrl||l};var y=function(e,t){var n=m()+"/oauth/authenticate?client_id="+e;if(t.provider)n+="&provider="+t.provider;for(var r in t){if(o.indexOf(r)<0){var i=r.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()});var s=t[r];n+="&"+i+"="+s}}return encodeURI(n)};var b=function(e,t,n){var r=Math.random().toString(36).substring(7);var i=screen.width/2-c/2;var s=screen.height/2-h/2;var o=window.open(e+"&clientside=js",r,"toolbar=yes, scrollbars=yes, resizable=yes, width="+c+", height="+h+" top="+s+", left="+i);p[r]={callbackUrl:t,popupWindow:o,provider:n}};var w=function(e,t){window.location.href=e+="&redirect_uri="+t};var E=function(e,t){for(i=0;i<e.length;i++){e[i].addEventListener("click",function(){var e=y(d._appClientId,t);if(t.flow==u){b(e,t.callbackUrl,t.provider)}else{w(e,t.callbackUrl)}})}};var S=function(e){try{return JSON.parse(e)}catch(t){d._failureCallback({message:r});throw r}};var x=function(e){try{return JSON.parse(e)}catch(t){d._failureCallback({message:s});throw s}};var T=function(e){var t=new XMLHttpRequest;t.onload=function(){var n=x(t.responseText);if(n){d._successCallback(n)}else{d._failureCallback({message:s})}};t.open("get",g()+"/v1/users/me.json",true);t.setRequestHeader("Authorization","Bearer "+e.access_token);t.send()};var N=function(e,t){var n=[];for(var r in e){if(e.hasOwnProperty(r)){n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}}var i=t+"?"+n.join("&");window.location.href=i};var C=function(e){if(e.origin!==m())return;if(!e.data.access_token)return;var t=p[e.data.popupName].callbackUrl;var n=new XMLHttpRequest;n.onload=function(){var i=S(n.responseText);if(!i)return;if(!t){T(e.data)}else{N(e.data,t)}};n.open("get",m()+"/oauth/tokeninfo?access_token="+e.data.access_token,true);n.send()};var k=function(){window.addEventListener("message",C,false)};d={init:function(e){this._appClientId=e;this._failureCallback=function(){};this._successCallback=function(){};k()},bind:function(r){if(!this._appClientId)throw e;if(!r.selector)throw t;var i=v(r.selector);if(!i)throw n;E(i,r)},success:function(e){this._successCallback=e},failure:function(e){this._failureCallback=e},config:function(e){this._authBaseUrl=e.authBaseUrl;this._apiBaseUrl=e.apiBaseUrl}};return d}()