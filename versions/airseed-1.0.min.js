window.airseed=function(){var e="Airseed: Missing client ID. Please call airseed.init('...') with valid client ID first.";var t="Airseed: Missing CSS selector to bind click event.";var n="Airseed: Missing authentication provider for Airseed auth. Please provide 'gmail', 'yahoo', or 'outlook'.";var r="Airseed: Invalid selector. Unable to locate specified elements on page.";var s="Airseed: Received invalid user access token.";var o="Airseed: Failed to fetch /v1/users/me.json endpoint info.";var u=["selector","provider","flow","callbackUrl"];var a="popup_window";var f="page_redirect";var l="https://auth.airseed.com";var c=l+"/oauth/authenticate";var h=l+"/oauth/tokeninfo";var p="https://api.airseed.com";var d=p+"/v1/users/me.json";var v=500;var m=500;var g={};var y;var b=function(e){var t;if(typeof e==="string"){t=document.querySelectorAll(e)}else if(e.length){t=e}else{t=[e]}return t};var w=function(e,t){var n=c+"?provider="+t.provider+"&client_id="+e;for(var r in t){if(u.indexOf(r)<0){var i=r.replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()});var s=t[r];n+="&"+i+"="+s}}return encodeURI(n)};var E=function(e,t,n){var r=Math.random().toString(36).substring(7);var i=screen.width/2-v/2;var s=screen.height/2-m/2;var o=window.open(e+"&clientside=js",r,"toolbar=yes, scrollbars=yes, resizable=yes, width="+v+", height="+m+" top="+s+", left="+i);g[r]={callbackUrl:t,popupWindow:o,provider:n}};var S=function(e,t){window.location.href=e+="&redirect_uri="+t};var x=function(e,t){for(i=0;i<e.length;i++){e[i].addEventListener("click",function(){var e=w(y._appClientId,t);if(t.flow==a){E(e,t.callbackUrl,t.provider)}else{S(e,t.callbackUrl)}})}};var T=function(e){try{return JSON.parse(e)}catch(t){y._failureCallback({message:s});throw s}};var N=function(e){try{return JSON.parse(e)}catch(t){y._failureCallback({message:o});throw o}};var C=function(e){var t=new XMLHttpRequest;t.onload=function(){var n=N(t.responseText);if(n){y._successCallback(n)}else{y._failureCallback({message:o})}};t.open("get",d,true);t.setRequestHeader("Authorization","Bearer "+e.access_token);t.send()};var k=function(e,t){var n=[];for(var r in e){if(e.hasOwnProperty(r)){n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}}var i=t+"?"+n.join("&");window.location.href=i};var L=function(e){if(e.origin!==l)return;if(!e.data.access_token)return;var t=g[e.data.popupName].callbackUrl;var n=new XMLHttpRequest;n.onload=function(){var i=T(n.responseText);if(!i)return;if(!t){C(e.data)}else{k(e.data,t)}};n.open("get",h+"?access_token="+e.data.access_token,true);n.send()};var A=function(){window.addEventListener("message",L,false)};y={init:function(e){this._appClientId=e;this._failureCallback=function(){};this._successCallback=function(){};A()},bind:function(i){if(!this._appClientId)throw e;if(!i.selector)throw t;if(!i.provider)throw n;var s=b(i.selector);if(!s)throw r;x(s,i)},success:function(e){this._successCallback=e},failure:function(e){this._failureCallback=e}};return y}()