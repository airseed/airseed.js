window.airseed=function(){var e="Airseed: Missing client ID. Please call airseed.init('...') with valid client ID first.";var t="Airseed: Missing CSS selector to bind click event.";var n="Airseed: Missing authentication provider for Airseed auth. Please provide 'gmail', 'yahoo', or 'outlook'.";var r="Airseed: Invalid selector. Unable to locate specified elements on page.";var s="Airseed: Received invalid user access token.";var o="Airseed: Failed to fetch /v1/users/me.json endpoint info.";var u="popup_window";var a="page_redirect";var f="https://auth.airseed.com";var l=f+"/oauth/authenticate";var c=f+"/oauth/tokeninfo";var h="https://api.airseed.com";var p=h+"/v1/users/me.json";var d=500;var v=500;var m={};var g;var y=function(e){var t;if(typeof e==="string"){t=document.querySelectorAll(e)}else if(e.length){t=e}else{t=[e]}return t};var b=function(e,t){return l+"?provider="+t+"&client_id="+e};var w=function(e,t,n){var r=Math.random().toString(36).substring(7);var i=screen.width/2-d/2;var s=screen.height/2-v/2;var o=window.open(e+"&clientside=js",r,"toolbar=yes, scrollbars=yes, resizable=yes, width="+d+", height="+v+" top="+s+", left="+i);m[r]={callbackUrl:t,popupWindow:o,provider:n}};var E=function(e,t){window.location.href=e+="&redirect_uri="+t};var S=function(e,t){console.log(t.provider);for(i=0;i<e.length;i++){e[i].addEventListener("click",function(){var e=b(g._appClientId,t.provider);console.log(e);console.log(t.provider);if(t.flow==u){w(e,t.callbackUrl,t.provider)}else{E(e,t.callbackUrl)}})}};var x=function(e){try{return JSON.parse(e)}catch(t){g._failureCallback({message:s});throw s}};var T=function(e){try{return JSON.parse(e)}catch(t){g._failureCallback({message:o});throw o}};var N=function(e){var t=new XMLHttpRequest;t.onload=function(){var n=T(t.responseText);if(n){g._successCallback(n)}else{g._failureCallback({message:o})}};t.open("get",p,true);t.setRequestHeader("Authorization","Bearer "+e.access_token);t.send()};var C=function(e,t){var n=[];for(var r in e){if(e.hasOwnProperty(r)){n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}}var i=t+"?"+n.join("&");window.location.href=i};var k=function(e){if(e.origin!==f)return;if(!e.data.access_token)return;var t=m[e.data.popupName].callbackUrl;var n=new XMLHttpRequest;n.onload=function(){var i=x(n.responseText);if(!i)return;if(!t){N(e.data)}else{C(e.data,t)}};n.open("get",c+"?access_token="+e.data.access_token,true);n.send()};var L=function(){window.addEventListener("message",k,false)};g={init:function(e){this._appClientId=e;this._failureCallback=function(){};this._successCallback=function(){};L()},bind:function(i){if(!this._appClientId)throw e;if(!i.selector)throw t;if(!i.provider)throw n;var s=y(i.selector);if(!s)throw r;S(s,i)},success:function(e){this._successCallback=e},failure:function(e){this._failureCallback=e}};return g}()